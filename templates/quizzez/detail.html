{% extends "base.html" %}
{% block title %}{{ quiz.title }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-8 px-4">
  <h1 class="text-3xl font-bold">{{ quiz.title }}</h1>
  <p class="text-gray-600 mt-2">{{ quiz.description }}</p>

  <div class="mt-6 bg-white shadow rounded-xl p-6">
    <h2 class="font-semibold text-lg">Your Attempts</h2>
    {% if user_attempts %}
      <ul class="mt-3 space-y-2">
        {% for attempt in user_attempts %}
          <li class="border rounded p-3 flex justify-between">
            <span>{{ attempt.started_at|date:"M d, Y H:i" }}</span>
            <span>{{ attempt.percentage|floatformat:1 }}%</span>
            {% if attempt.passed %}
              <span class="text-green-600 font-semibold">Passed</span>
            {% else %}
              <span class="text-red-600 font-semibold">Failed</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="mt-2 text-gray-500">You havenâ€™t attempted this quiz yet.</p>
    {% endif %}
  </div>

  <div class="mt-6">
    {% if can_retake %}
      <a href="{% url 'quizzes:take' quiz.id %}"
         class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-indigo-700">
        Start Quiz
      </a>
    {% else %}
      <p class="text-gray-500">You cannot retake this quiz right now.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
